<div class="dashboard-container">
    <div class="row">
        <form name="fileUploadForm">
            <div class="col-perc-100">
              <div class="instructions">
                Step 1: Upload CREFC Loan Setup File for single securitization
              </div>
                <div ngf-select ng-model="$ctrl.loanFile" class="drop-box"
                     ngf-drag-over-class="'dragover'" ngf-multiple="false"
                     ngf-model-options="{updateOn: 'change click drop dropUrl paste', allowInvalid: false, debounce: 0}"
                     ngf-pattern="*">
                     <div class="drag-text">
                       <h2>Drag a file here</h2>
                       <p>Or, if you prefer...</p>
                     </div>
                    <button type="button" name="upload" class="btn-upload btn btn-primary">Select a file from your computer</button>
                    <div class="text-success">{{$ctrl.loanFile.name}}</div>
                </div>
            </div>
            <!--application/vnd.ms-excel,application/xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet-->
            <div class="col-perc-100">
              <div class="instructions">
                Step 2: Upload most recent reporting period IRP files for single securitization <br>
                (you will be prompted to convert to .xlsx if file is .csv or .txt)
              </div>
                <div ngf-select ng-model="$ctrl.serviceFile" class="drop-box"
                     ngf-drag-over-class="'dragover'" ngf-multiple="true"
                     ngf-model-options="{updateOn: 'change click drop dropUrl paste', allowInvalid: false, debounce: 0}"
                     ngf-pattern="*">
                     <div class="drag-text">
                       <h2>Drag a file here</h2>
                       <p>Or, if you prefer...</p>
                     </div>
                     <button type="button" name="upload" class="btn-upload btn btn-primary">Select a file from your computer</button>
                    <div class="text-success" ng-repeat="_serviceFile in $ctrl.serviceFile track by $index">{{ _serviceFile.name }}</div>
                </div>
                <div class="instructions">
                  Please make sure the name on each sheet within your workbooks *exactly* match the required names shown below. <br>
                  If after upload any of the names do not appear green, please edit the sheet name in your original file and upload again.
                </div>
                <div class="row available-service-container">
                    <div class="col-perc-30"   ng-repeat="tab in $ctrl.availableServiceTabs">
                        <div class="alert bordered" ng-class="{ 'alert-success': tab.isAvailable }"> <span>{{ tab.name }}</span></div> </div>
                </div>
            </div>
            <div class="col-perc-100 margin-top-10" ng-if="$ctrl.loanFile && $ctrl.serviceFile">
                <div class="instructions">
                  Step 3: Click below to convert IRP
                </div>
                <button ng-disabled="$ctrl.sumittingFiles" class="go col-perc-100 btn btn-primary  margin-left-10"
                        ng-click="$ctrl.uploadFiles()"><span ng-if="!$ctrl.sumittingFiles">Convert</span><span
                        ng-if="$ctrl.sumittingFiles">  Converting <tiny-spinner></tiny-spinner></span>
                </button>
            </div>
        </form>
    </div>

    <div class="row" ng-if="$ctrl.investments">
        <div class="instructions">
          Step 4: Inspect investments below and click button to download JSON file <br>
          (make sure your pop-ups are allowed for this site in your browser settings)
        </div>
        <a class="btn btn-primary  col-perc-100"  href="javascript:void(0)" ng-click="$ctrl.downloadJson()"> Download JSON File</a>
        <div class="row instructions">
          To repeat this process and convert more files, please refresh your browser page.
        </div>
    </div>

    <div class="row clearfix margin-top-20" id="investmentTreeView">
    </div>
</div>
